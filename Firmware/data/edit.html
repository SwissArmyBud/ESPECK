<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><!-- Suppress browser request for favicon.ico --><link rel="shortcut icon" type="image/x-icon" href="data:image/x-icon;,"><title>SPIFFS Editor</title><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="X-UA-Compatible" content="IE=edge"><style type="text/css" media="screen">.contextMenu{z-index:300;position:absolute;left:5px;border:1px solid #444;background-color:#f5f5f5;display:none;box-shadow:0 0 10px rgba(0,0,0,.4);font-size:12px;font-family:sans-serif;font-weight:700}.contextMenu ul{list-style:none;top:0;left:0;margin:0;padding:0}.contextMenu li{position:relative;min-width:60px;cursor:pointer}.contextMenu span{color:#444;display:inline-block;padding:6px}.contextMenu li:hover{background:#444}.contextMenu li:hover span{color:#eee}.css-treeview li,.css-treeview ul{padding:0;margin:0;list-style:none}.css-treeview input{position:absolute;opacity:0}.css-treeview{font:normal 11px Verdana,Arial,Sans-serif;-moz-user-select:none;-webkit-user-select:none;user-select:none}.css-treeview span{color:#00f;cursor:pointer}.css-treeview span:hover{text-decoration:underline}.css-treeview input+label+ul{margin:0 0 0 22px}.css-treeview input~ul{display:none}.css-treeview label,.css-treeview label::before{cursor:pointer}.css-treeview input:disabled+label{cursor:default;opacity:.6}.css-treeview input:checked:not(:disabled)~ul{display:block}.css-treeview label,.css-treeview label::before{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAACgCAYAAAAFOewUAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAApxJREFUeNrslM1u00AQgGdthyalFFOK+ClIIKQKyqUVQvTEE3DmAhLwAhU8QZoH4A2Q2gMSFace4MCtJ8SPBFwAkRuiHKpA6sRN/Lu7zG5i14kctaUqRGhGXnu9O/Pt7MzsMiklvF+9t2kWTDvyIrAsA0aKRRi1T0C/hJ4LUbt5/8rNpWVlp8RSr9J40b48fxFaTQ9+ft8EZ6MJYb0Ok+dnYGpmPgXwKIAvLx8vYXc5GdMAQJgQEkpjRTh36TS2U+DWW/D17WuYgm8pwJyY1npZsZKOxImOV1I/h4+O6vEg5GCZBpgmA6hX8wHKUHDRBXQYicQ4rlc3Tf0VMs8DHBS864F2YFspjgUYjKX/Az3gsdQd2eeBHwmdGWXHcgBGSkZXOXohcEXebRoQcAgjqediNY+AVyu3Z3sAKqfKoGMsewBeEIOPgQxxPJIjcGH6qtL/0AdADzKGnuuD+2tLK7Q8DhHHbOBW+KEzcHLuYc82MkEUekLiwuvVH+guQBQzOG4XdAb8EOcRcqQvDkY2iCLuxECJ43JobMXoutqGgDa2T7UqLKwt9KRyuxKVByqVXXqIoCCUCAqhUOioTWC7G4TQEOD0APy2/7G2Xpu1J4+lxeQ4TXBbITDpoVelRN/BVFbwu5oMMJUBhoXy5tmdRcMwymP2OLQaLjx9/vnBo6V3K6izATmSnMa0Dq7ferIohJhr1p01zrlz49rZF4OMs8JkX23vVQzYp+wbYGV/KpXKjvspl8tsIKCrMNAYFxj2GKS5ZWxg4ewKsJfaGMIY5KXqPz8LBBj6+yDvVP79+yDp/9F9oIx3OisHWwe7Oal0HxCAAAQgAAEIQAACEIAABCAAAQhAAAIQgAAEIAABCEAAAhCAAAQgwD8E/BZgAP0qhKj3rXO7AAAAAElFTkSuQmCC) no-repeat}.css-treeview label,.css-treeview label::before,.css-treeview span{display:inline-block;height:16px;line-height:16px;vertical-align:middle}.css-treeview label{background-position:18px 0}.css-treeview label::before{content:"";width:16px;margin:0 22px 0 0;vertical-align:middle;background-position:0 -32px}.css-treeview input:checked+label::before{background-position:0 -16px}@media screen and (-webkit-min-device-pixel-ratio:0){.css-treeview{-webkit-animation:webkit-adjacent-element-selector-bugfix infinite 1s}@-webkit-keyframes webkit-adjacent-element-selector-bugfix{from{padding:0}to{padding:0}}}#uploader{position:absolute;top:0;right:0;left:0;height:28px;line-height:24px;padding-left:10px;background-color:#444;color:#eee}#tree{position:absolute;top:28px;bottom:0;left:0;width:200px;padding:8px}#editor,#preview{position:absolute;top:28px;right:0;bottom:0;left:200px}#preview{background-color:#eee;padding:5px}</style><script>function createFileUploader(e,t,n){var d,a=document.createElement("input");a.type="file",a.multiple=!1,a.name="data",document.getElementById(e).appendChild(a);var o=document.createElement("input");o.id="upload-path",o.type="text",o.name="path",o.defaultValue="/",document.getElementById(e).appendChild(o);var l=document.createElement("button");l.innerHTML="Upload",document.getElementById(e).appendChild(l);var c=document.createElement("button");c.innerHTML="MkDir",document.getElementById(e).appendChild(c);var i=document.createElement("button");i.innerHTML="MkFile",document.getElementById(e).appendChild(i);var s=document.createElement("button");s.innerHTML="Save",document.getElementById(e).appendChild(s);var m=document.createElement("button");m.innerHTML="Undo",document.getElementById(e).appendChild(m);var r=document.createElement("button");function u(){4==d.readyState&&(200!=d.status?alert("ERROR["+d.status+"]: "+d.responseText):t.refreshPath(o.value))}function p(e){(d=new XMLHttpRequest).onreadystatechange=u;var t=new FormData;t.append("path",e),d.open("PUT","/edit"),d.send(t)}r.innerHTML="Redo",document.getElementById(e).appendChild(r),s.onclick=function(e){n.execCommand("saveCommand")},m.onclick=function(e){n.getSession().getUndoManager().undo(!1)},r.onclick=function(e){n.getSession().getUndoManager().redo(!1)},i.onclick=function(e){-1!==o.value.indexOf(".")&&(p(o.value),n.loadUrl(o.value))},c.onclick=function(e){if(!(o.value.length<2)){var t=o.value;if(-1!==t.indexOf(".")){if(0===t.lastIndexOf("/"))return;t=t.substring(0,t.lastIndexOf("/"))}p(t)}},l.onclick=function(e){if(0!==a.files.length){(d=new XMLHttpRequest).onreadystatechange=u;var t=new FormData;t.append("data",a.files[0],o.value),d.open("POST","/edit"),d.send(t)}},a.onchange=function(e){if(0!==a.files.length){var t=a.files[0].name,n=/(?:\.([^.]+))?$/.exec(t)[1],d=/(.*)\.[^.]+$/.exec(t)[1];void 0!==typeof d&&(8<d.length&&(d=d.substring(0,8)),t=d),void 0!==typeof n&&("html"===n?n="htm":"jpeg"===n&&(n="jpg"),t=t+"."+n),"/"===o.value||0===o.value.lastIndexOf("/")?o.value="/"+t:o.value=o.value.substring(0,o.value.lastIndexOf("/")+1)+t}}}function createTree(e,l){var t=document.getElementById("preview"),d=document.createElement("div");function c(e){document.getElementById("editor").style.display="none",t.style.display="block",t.innerHTML='<img src="'+e+'" style="max-width:100%; max-height:100%; margin:auto; display:block;" />'}function m(n,d){var e=document.createElement("ul");n.appendChild(e);var t=document.createElement("li");e.appendChild(t),u(d)?(t.innerHTML="<span>Edit</span>",t.onclick=function(e){l.loadUrl(d),0<document.body.getElementsByClassName("contextMenu").length&&document.body.removeChild(n)}):p(d)&&(t.innerHTML="<span>Preview</span>",t.onclick=function(e){c(d),0<document.body.getElementsByClassName("contextMenu").length&&document.body.removeChild(n)});var a=document.createElement("li");e.appendChild(a),a.innerHTML="<span>Download</span>",a.onclick=function(e){var t;t=d,document.getElementById("download-frame").src=t+"?download=true",0<document.body.getElementsByClassName("contextMenu").length&&document.body.removeChild(n)};var o=document.createElement("li");e.appendChild(o),o.innerHTML="<span>Delete</span>",o.onclick=function(e){h(d),0<document.body.getElementsByClassName("contextMenu").length&&document.body.removeChild(n)}}function i(e,t,n){var d=document.createElement("div"),a=document.body.scrollTop?document.body.scrollTop:document.documentElement.scrollTop,o=document.body.scrollLeft?document.body.scrollLeft:document.documentElement.scrollLeft,l=e.clientX+o,c=e.clientY+a;d.className="contextMenu",d.style.display="block",d.style.left=l+"px",d.style.top=c+"px",n?m(d,t):function(d,a){var e=document.createElement("ul");d.appendChild(e);var t=document.createElement("li");e.appendChild(t);var n=document.getElementById(a).checked,o=document.createElement("li");if(e.appendChild(o),n){o.innerHTML="<span>Collapse</span>",o.onclick=function(e){document.getElementById(a).checked=!1,0<document.body.getElementsByClassName("contextMenu").length&&document.body.removeChild(d)};var l=document.createElement("li");e.appendChild(l),l.innerHTML="<span>Refresh</span>",l.onclick=function(e){var t=document.getElementById(a).parentNode;3==t.childNodes.length&&t.removeChild(t.childNodes[2]),f(t,a),0<document.body.getElementsByClassName("contextMenu").length&&document.body.removeChild(d)}}else o.innerHTML="<span>Expand</span>",o.onclick=function(e){document.getElementById(a).checked=!0;var t=document.getElementById(a).parentNode;3==t.childNodes.length&&t.removeChild(t.childNodes[2]),f(t,a),0<document.body.getElementsByClassName("contextMenu").length&&document.body.removeChild(d)};var c=document.createElement("li");e.appendChild(c),c.innerHTML="<span>Upload</span>",c.onclick=function(e){var t=document.getElementById("upload-path");if(t){var n=t.value;n.lastIndexOf("/")<1?t.value=a+n:t.value=a.substring(n.lastIndexOf("/"))+n}0<document.body.getElementsByClassName("contextMenu").length&&document.body.removeChild(d)};var i=document.createElement("li");e.appendChild(i),i.innerHTML="<span>Delete</span>",i.onclick=function(e){h(a),0<document.body.getElementsByClassName("contextMenu").length&&document.body.removeChild(d)}}(d,t),document.body.appendChild(d);var i=d.offsetWidth,s=d.offsetHeight;d.onmouseout=function(e){(e.clientX<l||e.clientX>l+i||e.clientY<c||e.clientY>c+s)&&0<document.body.getElementsByClassName("contextMenu").length&&document.body.removeChild(d)}}function s(e,t,n){var d=document.createElement("li");d.id=("/"==e?"":e)+"/"+t;var a=document.createElement("span");return a.textContent=t,d.appendChild(a),d.onclick=function(e){u(d.id)?l.loadUrl(d.id):p(d.id)&&c(d.id)},d.oncontextmenu=function(e){e.preventDefault(),e.stopPropagation(),i(e,d.id,!0)},d}function r(e,t,n){var d=document.createElement("li"),a=document.createElement("input");a.type="checkbox",a.id=("/"==e?"":e)+"/"+t,void 0!==n&&n&&(a.disabled="disabled"),d.appendChild(a);var o=document.createElement("label");return o.for=a.id,o.textContent=t,d.appendChild(o),a.onchange=function(e){a.checked&&(3==d.childNodes.length&&d.removeChild(d.childNodes[2]),f(d,a.id))},o.onclick=function(e){a.checked?a.checked=!1:(a.checked=!0,3==d.childNodes.length&&d.removeChild(d.childNodes[2]),f(d,a.id))},d.oncontextmenu=function(e){e.preventDefault(),e.stopPropagation(),i(e,a.id,!1)},d}function u(e){var t=/(?:\.([^.]+))?$/.exec(e)[1];if(void 0!==typeof t)switch(t){case"txt":case"htm":case"html":case"js":case"json":case"c":case"h":case"cpp":case"css":case"xml":case"cnf":return!0}return!1}function p(e){var t=/(?:\.([^.]+))?$/.exec(e)[1];if(void 0!==typeof t)switch(t){case"png":case"jpg":case"gif":case"ico":return!0}return!1}function h(e){var t;xmlHttp=new XMLHttpRequest,xmlHttp.onreadystatechange=(t=e,function(){if(4==xmlHttp.readyState)if(200!=xmlHttp.status)alert("ERROR["+xmlHttp.status+"]: "+xmlHttp.responseText);else if(t.lastIndexOf("/")<1)t="/",d.removeChild(d.childNodes[0]),f(d,"/");else{t=t.substring(0,t.lastIndexOf("/"));var e=document.getElementById(t).parentNode;3==e.childNodes.length&&e.removeChild(e.childNodes[2]),f(e,t)}});var n=new FormData;n.append("path",e),xmlHttp.open("DELETE","/edit"),xmlHttp.send(n)}function n(e,t){return function(){4==xmlHttp.readyState&&200==xmlHttp.status&&function(e,t,n){var d=document.createElement("ul");e.appendChild(d);for(var a=n.length,o=0;o<a;o++){var l,c=n[o];l="file"===c.type?s(t,c.name,c.size):r(t,c.name),d.appendChild(l)}}(e,t,JSON.parse(xmlHttp.responseText))}}function f(e,t){xmlHttp=new XMLHttpRequest(e,t),xmlHttp.onreadystatechange=n(e,t),xmlHttp.open("GET","/list?dir="+t,!0),xmlHttp.send(null)}return d.className="css-treeview",document.getElementById(e).appendChild(d),this.refreshPath=function(e){if(e.lastIndexOf("/")<1)e="/",d.removeChild(d.childNodes[0]),f(d,"/");else{e=e.substring(0,e.lastIndexOf("/"));var t=document.getElementById(e).parentNode;3==t.childNodes.length&&t.removeChild(t.childNodes[2]),f(t,e)}},f(d,"/"),this}function createEditor(e,t,n,d){function a(e){var t="plain",n=/(?:\.([^.]+))?$/.exec(e)[1];if(void 0!==typeof n)switch(n){case"cnf":case"txt":t="plain";break;case"htm":t="html";break;case"js":t="javascript";break;case"c":case"cpp":t="c_cpp";break;case"css":case"scss":case"php":case"html":case"json":case"xml":t=n}return t}void 0===t&&(t="/index.html"),void 0===n&&(n=a(t)),void 0===d&&(d="text/"+n,"c_cpp"===n&&(d="text/plain"));var o=null,l=ace.edit(e);function c(){4==o.readyState&&200!=o.status&&alert("ERROR["+o.status+"]: "+o.responseText)}function i(){4==o.readyState&&(document.getElementById("preview").style.display="none",document.getElementById("editor").style.display="block",200==o.status?l.setValue(o.responseText):l.setValue(""),l.clearSelection())}function s(e){(o=new XMLHttpRequest).onreadystatechange=i,o.open("GET",e,!0),o.setRequestHeader("If-Modified-Since",""),o.send(null)}return l.$blockScrolling=1/0,l.getSession().setUseSoftTabs(!0),l.getSession().setTabSize(2),l.setHighlightActiveLine(!0),l.setShowPrintMargin(!1),l.commands.addCommand({name:"saveCommand",bindKey:{win:"Ctrl-S",mac:"Command-S"},exec:function(e){!function(e,t,n){(o=new XMLHttpRequest).onreadystatechange=c;var d=new FormData;d.append("data",new Blob([t],{type:n}),e),o.open("POST","/edit"),o.send(d)}(t,e.getValue()+"",d)},readOnly:!1}),l.commands.addCommand({name:"undoCommand",bindKey:{win:"Ctrl-Z",mac:"Command-Z"},exec:function(e){e.getSession().getUndoManager().undo(!1)},readOnly:!1}),l.commands.addCommand({name:"redoCommand",bindKey:{win:"Ctrl-Shift-Z",mac:"Command-Shift-Z"},exec:function(e){e.getSession().getUndoManager().redo(!1)},readOnly:!1}),s(t),l.loadUrl=function(e){n=a(t=e),d="text/"+n,s(t)},l}function onBodyLoad(){var d={},e=(window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,t,n){d[t]=n}),createEditor("editor",d.file,d.lang));createFileUploader("uploader",createTree("tree",e),e)}</script><script src="/ace.js" type="text/javascript" charset="utf-8"></script></head><body onload="onBodyLoad();"><div id="uploader"></div><div id="tree"></div><div id="editor"></div><div id="preview" style="display:none;"></div><iframe id="download-frame" style="display:none;"></iframe></body></html>